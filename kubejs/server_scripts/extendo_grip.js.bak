const CuriosApi = Java.loadClass("top.theillusivec4.curios.api.CuriosApi");

function set_private_field(cls, field, value) {
  let cls_field = cls.class.getDeclaredField(field);
  cls_field.setAccessible(true);
  cls_field.set(cls, value);
}

PlayerEvents.tick((event) => {
  const api = new CuriosApi();
  const equipped = api
    .getCuriosHelper()
    .getEquippedCurios(event.player)
    .resolve()
    .get();

  // Iterate through equipped curios
  equipped.forEach((e) => {
    // If the player has an extendo grip equipped, increase their reach distance
    if (e.id == "create:extendo_grip") {
      // FIXME: Protected property needs setter method instead?
      set_private_field(event.player, "reachDistance", 8);
      //event.player.reachDistance = 8;
    }
  });
});

// Tag items as curios
ServerEvents.tags("item", (event) => {
  event.add("curios:hands", "create:extendo_grip");
});
